{"version":3,"file":"index.es.js","sources":["../node_modules/tslib/tslib.es6.js","../node_modules/style-inject/dist/style-inject.es.js","../src/verify.ts","../src/ui/TestComponent/TestComponent.tsx","../src/ui/SupportedChains.ts","../src/ui/SignInWithBlockinButton/SignInWithBlockinButton.tsx","../src/ui/ChainSelect/ChainSelect.tsx"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { IChainDriver } from './@types/ChainDriver'\r\nimport { ChallengeParams, CreateChallengeOptions, EIP4361Challenge, VerifyChallengeOptions } from './@types/verify'\r\n\r\nconst URI_REGEX: RegExp = /\\w+:(\\/?\\/?)[^\\s]+/;\r\nconst ISO8601_DATE_REGEX: RegExp = /^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?(Z)?$/\r\n\r\nvar chainDriver: IChainDriver\r\n\r\nexport function initializeVerify(driver: IChainDriver) {\r\n    chainDriver = driver\r\n}\r\n\r\n/**\r\n * Creates a challenge that is well-formed according to EIP-4361 - Sign in With Ethereum. Some\r\n * slight modifications to EIP-4361 for our library include 1) any blockchain's native address, signature,\r\n * and verification schemes are supported and 2) in resources, one may prefix an asset with 'Asset ID: '\r\n * to specify micro-authorizations or role-based access using an on-chain asset.\r\n * \r\n * \r\n * @param challengeParams - JSON object with the challenge details such as domain, uri, statement, address, etc.\r\n * @param options - JSON object speicfying any additional options when creating the challenge\r\n * @returns Well-formed challenge string to be signed by the user, if successsful. Error string is returned\r\n * upon failure.\r\n */\r\nexport async function createChallenge(challengeParams: ChallengeParams, options?: CreateChallengeOptions) {\r\n    /**\r\n     *  This function should remain completely ChainDriver free. ChainDriver dependencies tend to mess up the\r\n     * React component generation in the browser.\r\n     */\r\n\r\n    const {\r\n        domain,\r\n        statement,\r\n        address,\r\n        uri,\r\n        nonce,\r\n        version = \"1\",\r\n        chainId = \"1\",\r\n        issuedAt = new Date().toISOString(),\r\n        expirationDate = undefined,\r\n        notBefore = undefined,\r\n        resources = undefined\r\n    } = challengeParams;\r\n\r\n    try {\r\n        const challenge: EIP4361Challenge = {\r\n            domain,\r\n            statement,\r\n            address,\r\n            uri,\r\n            version,\r\n            chainId,\r\n            nonce,\r\n            issuedAt,\r\n            expirationDate,\r\n            notBefore,\r\n            resources\r\n        }\r\n\r\n        validateChallengeObjectIsWellFormed(challenge); // will throw error if invalid\r\n\r\n        return constructChallengeStringFromChallengeObject(challenge);\r\n    } catch (error: unknown) {\r\n        return `Error: ${error}`;\r\n    }\r\n}\r\n\r\n/**\r\n * verifyChallenge always checks three things: 1) originalChallenge was signed correctly by the user, 2) the\r\n * challenge is still well-formed and valid at the present time, and 3) the user owns all requested assets\r\n * in their wallet upon verification.\r\n * @param originalChallenge - The bytes (Uint8 Array) that were signed that represent the original challenge.\r\n * @param signedChallenge - The result of signing the bytes as a Uint8Array\r\n * @param options - Additional checks to perform when verifying the challenge.\r\n * @returns Returns { message: 'success' } object upon success. Throws an error if challenge is invalid.\r\n */\r\nexport async function verifyChallenge(originalChallenge: Uint8Array, signedChallenge: Uint8Array, options?: VerifyChallengeOptions) {\r\n    const verificationData: any = {};\r\n    const generatedEIP4361ChallengeStr: string = await getChallengeStringFromBytes(originalChallenge);\r\n    const challenge: EIP4361Challenge = constructChallengeObjectFromString(generatedEIP4361ChallengeStr);\r\n\r\n    validateChallengeObjectIsWellFormed(challenge);\r\n    console.log(\"Success: Constructed challenge from string and verified it is well-formed.\");\r\n\r\n    const currDate = new Date();\r\n    verificationData.verificationTime = currDate;\r\n    if (challenge.expirationDate && currDate >= new Date(challenge.expirationDate)) {\r\n        throw `Error: Challenge expired: ${challenge.expirationDate}`\r\n    }\r\n\r\n    if (challenge.notBefore && currDate <= new Date(challenge.notBefore)) {\r\n        throw `Error: Challenge invalid until: ${challenge.notBefore}`\r\n    }\r\n\r\n    const originalAddress = challenge.address;\r\n    await verifyChallengeSignature(originalChallenge, signedChallenge, originalAddress)\r\n    console.log(\"Success: Signature matches address specified within the challenge.\");\r\n\r\n    if (options?.verifyNonceWithBlockTimestamps) {\r\n        let blockTimestamp = await chainDriver.getTimestampForBlock(challenge.nonce);\r\n        verificationData.nonceTimestamp = blockTimestamp;\r\n        const currentTimestamp = Math.round((new Date()).getTime() / 1000);\r\n        const timeLimit = options?.verificationTimeLimit ? options?.verificationTimeLimit : 60;\r\n\r\n        if (blockTimestamp <= currentTimestamp - timeLimit) {\r\n            throw `Error: This challenge uses recent block timestamps for the nonce. The challenge must be verified within ${timeLimit} seconds of creating the challenge`\r\n        }\r\n    }\r\n\r\n    if (options?.expectedDomain && challenge.domain !== options?.expectedDomain) {\r\n        throw `Error: Domain !== ${options?.expectedDomain}`;\r\n    }\r\n\r\n    if (options?.expectedUri && challenge.uri !== options?.expectedUri) {\r\n        throw `Error: Uri !== ${options?.expectedUri}`;\r\n    }\r\n\r\n    if (challenge.resources) {\r\n        const assetLookupData = await verifyOwnershipOfAssets(challenge.address, challenge.resources, options?.assetMinimumBalancesMap, options?.defaultMinimum);\r\n        verificationData.assetLookupData = assetLookupData\r\n    }\r\n\r\n    return {\r\n        message: `Successfully granted access via Blockin`, success: true, verificationData\r\n    }\r\n}\r\n\r\n/**\r\n * Looks up transaction data by ID using the specified chain driver\r\n * @param txnID - Transaction ID broadcasted to the network\r\n * @returns Metadata about the transaction\r\n */\r\nexport async function lookupTransactionById(txnID: string) {\r\n    return await chainDriver.lookupTransactionById(txnID);\r\n}\r\n\r\n/**\r\n * Gets information about a specific asset using sepecified chain driver\r\n * @param assetId - Unique asset identifier\r\n * @returns Metadata about the asset\r\n */\r\nexport async function getAssetDetails(assetId: string) {\r\n    return await chainDriver.getAssetDetails(assetId)\r\n}\r\n\r\n/**\r\n * Generates a nonce using the most recent block index. Can be called directly\r\n * or by specifiying the useBlockTimestampsForNonce flag in the createChallenge\r\n * options. verifyChallenge also offers two flags: (verifyNonceWithBlockTimestamps?: boolean;\r\n * and verificationTimeLimit?: number;) that ensure timestamp of the block was recent when\r\n * verifying. \r\n * @returns Last block index / timestamp / hash to be used as the nonce\r\n */\r\nexport async function generateNonceWithLastBlockTimestamp() {\r\n    const nonce = await chainDriver.getLastBlockIndex()\r\n    return nonce;\r\n}\r\n\r\n/**\r\n * Validates the object is well-formed according to the EIP-4361 interface, plus our additional add-ons\r\n * to the interface for Blockin. \r\n * @param challenge - Valid JSON challenge object\r\n */\r\nexport function validateChallengeObjectIsWellFormed(challenge: EIP4361Challenge) {\r\n    if (!URI_REGEX.test(challenge.domain)) {\r\n        throw `Inputted domain (${challenge.domain}) is not a valid URI`;\r\n    }\r\n\r\n    /**\r\n     * We only check for existence of an address here for Rollup React purposes (we don't use ChainDriver's isValidAddress). \r\n     * Will not be able to generate a valid signature with an invalid address, however.\r\n     */\r\n    if (!challenge.address) {\r\n        throw `No address specified or address is invalid`;\r\n    }\r\n\r\n    if (!URI_REGEX.test(challenge.uri)) {\r\n        throw `Inputted URI (${challenge.uri}) is not a valid URI`;\r\n    }\r\n\r\n    if (!challenge.nonce) {\r\n        throw `No nonce (${challenge.nonce}) specified`;\r\n    }\r\n\r\n    if (!ISO8601_DATE_REGEX.test(challenge.issuedAt)) {\r\n        throw `Issued at date (${challenge.issuedAt}) is not in valid ISO 8601 format`;\r\n    }\r\n\r\n    if (challenge.expirationDate && !ISO8601_DATE_REGEX.test(challenge.expirationDate)) {\r\n        throw `Inputted expiration date (${challenge.expirationDate}) is not in valid ISO 8601 format`;\r\n    }\r\n\r\n    if (challenge.notBefore && !ISO8601_DATE_REGEX.test(challenge.notBefore)) {\r\n        throw `Inputted not before date (${challenge.notBefore}) is not in valid ISO 8601 format`;\r\n    }\r\n\r\n    if (challenge.resources) {\r\n        for (const resource of challenge.resources) {\r\n            if (!resource.startsWith('Asset ID: ') && !URI_REGEX.test(resource)) {\r\n                throw `Inputted resource in resources (${resource}) does not start with 'Asset ID: ' and is not a valid URI`;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Parses a JSON object that specifies the challenge fields and returns a well-formatted EIP-4361 string. \r\n * Note that there is no validity checks on the inputs. It is a precondition that it is well-formed. \r\n * @param challenge - Well-formatted JSON object specifying the EIP-4361 fields.\r\n * @returns - Well-formatted EIP-4361 challenge string to be signed.\r\n */\r\nexport function constructChallengeStringFromChallengeObject(challenge: EIP4361Challenge): string {\r\n    let message = \"\";\r\n    message += `${challenge.domain} wants you to sign in with your Algorand account:\\n`\r\n    message += `${challenge.address}\\n\\n`;\r\n    if (challenge.statement) {\r\n        message += `${challenge.statement}\\n`;\r\n    }\r\n    message += `\\n`;\r\n    message += `URI: ${challenge.uri}\\n`;\r\n    message += `Version: ${challenge.version}\\n`;\r\n    message += `Chain ID: ${challenge.chainId}\\n`;\r\n    message += `Nonce: ${challenge.nonce}\\n`;\r\n    message += `Issued At: ${challenge.issuedAt}`;\r\n    if (challenge.expirationDate) {\r\n        message += `\\nExpiration Time: ${challenge.expirationDate}`;\r\n    }\r\n    if (challenge.notBefore) {\r\n        message += `\\nNot Before: ${challenge.notBefore}\\n`;\r\n    }\r\n    if (challenge.resources) {\r\n        message += `\\nResources:`;\r\n        for (const resource of challenge.resources) {\r\n            message += `\\n- ${resource}`\r\n        }\r\n    }\r\n\r\n    return message;\r\n}\r\n\r\n/**\r\n * This function is called in order to parse the challenge string from the bytes that were signed.\r\n * It is specific to the specified chain driver. This function is needed because most signing\r\n * algorithms add a prefix to the string before signing, so this function attempts to undo that.\r\n * @param txnBytes - Original bytes that were signed as a Uint8Array\r\n * @returns Parses out and returns the challenge string that was signed\r\n */\r\nexport async function getChallengeStringFromBytes(txnBytes: Uint8Array): Promise<string> {\r\n    return chainDriver.getChallengeStringFromBytesToSign(txnBytes);\r\n}\r\n\r\n/**\r\n * Constructs a valid JSON challenge object from a valid well-formed EIP-4361 string. Note this\r\n * doesn't check for validity at all. See the EIP-4361 proposal for more details about exact formatting\r\n * requirements of the string.\r\n * @param challenge - Valid EIP-4361 challenge string\r\n * @returns JSON challenge object with all specified EIP-4361 fields\r\n */\r\nexport function constructChallengeObjectFromString(challenge: string): EIP4361Challenge {\r\n    const messageArray = challenge.split(\"\\n\");\r\n    const domain = messageArray[0].split(' ')[0];\r\n    const address = messageArray[1];\r\n    const statement = messageArray[3];\r\n    const uri = messageArray[5].split(' ')[1];\r\n    const version = messageArray[6].split(':')[1].trim();\r\n    const chainId = messageArray[7].split(':')[1].trim();\r\n    const nonce = messageArray[8].split(':')[1].trim();\r\n    const issuedAt = messageArray[9].split(':').slice(1).join(':').trim();\r\n\r\n    let expirationDate;\r\n    let notBefore;\r\n    let resources = [];\r\n    if (messageArray[10]) {\r\n        if (messageArray[10].indexOf('Expiration Time:') != -1) {\r\n            expirationDate = messageArray[10].split(':').slice(1).join(':').trim();\r\n        } else if (messageArray[10].indexOf('Not Before:') != -1) {\r\n            notBefore = messageArray[10].split(':').slice(1).join(':').trim();\r\n        } else if (messageArray[10].indexOf('Resources:') != -1) {\r\n            resources = [];\r\n            for (let i = 11; i < messageArray.length; i++) {\r\n                const resource = messageArray[i].split(' ').slice(1).join(' ').trim();\r\n                resources.push(resource);\r\n            }\r\n        }\r\n    }\r\n\r\n    if (messageArray[11]) {\r\n        if (messageArray[11].indexOf('Not Before:') != -1) {\r\n            notBefore = messageArray[11].split(':').slice(1).join(':').trim();\r\n        } else if (messageArray[11].indexOf('Resources:') != -1) {\r\n            resources = [];\r\n            for (let i = 12; i < messageArray.length; i++) {\r\n                const resource = messageArray[i].split(' ').slice(1).join(' ').trim();\r\n                resources.push(resource);\r\n            }\r\n        }\r\n    }\r\n\r\n    if (messageArray[12]) {\r\n        if (messageArray[12].indexOf('Resources:') != -1) {\r\n            resources = [];\r\n            for (let i = 13; i < messageArray.length; i++) {\r\n                const resource = messageArray[i].split(' ').slice(1).join(' ').trim();\r\n                resources.push(resource);\r\n            }\r\n        }\r\n    }\r\n\r\n    return { domain, address, statement, expirationDate, notBefore, resources, issuedAt, uri, version, chainId, nonce };\r\n}\r\n\r\n/**\r\n * Verifies a challenge is signed by the given addresses. Throws error if invalid. Specific to \r\n * specified chain driver.\r\n * @param originalChallengeToUint8Array - Uint8Array of the original bytes that were signed\r\n * @param signedChallenge - Uint8Array of the signature bytes\r\n * @param originalAddress - string that specifies the address who signed these bytes\r\n */\r\nexport async function verifyChallengeSignature(originalChallengeToUint8Array: Uint8Array, signedChallenge: Uint8Array, originalAddress: string) {\r\n    await chainDriver.verifySignature(originalChallengeToUint8Array, signedChallenge, originalAddress);\r\n}\r\n\r\n/**\r\n * Gets all asset data for an address. Specific to specified chain driver. Be cautious when using this. It \r\n * may be more efficient to query address' balances for each asset.\r\n * @param address - address of user to lookup asset data for\r\n * @returns Metadata about all a user's owned assets\r\n */\r\nexport async function getAllAssetsForAddress(address: string) {\r\n    return (await chainDriver.getAllAssetsForAddress(address))\r\n}\r\n\r\n/**\r\n * Verifies an address owns all specified resources. Ignores everything that doesn't start with 'Asset ID: '. \r\n * Defaults to succeeding if user has a balance of >= 1 for every asset.  \r\n * @param address - Address to verify\r\n * @param resources - String array of URIs or Asset IDs. This function ignores every resource that doesn't start\r\n * with 'Asset ID: '\r\n * @param assetMinimumBalancesMap - Optional, but here, one can define a JSON object mapping of \r\n * 'assetIDs' => minimumBalances. If assetMinimumBalancesMap[assetId] exists, it will check that the user owns \r\n * more than the specified minimum balance. If not defined, will use the default.\r\n * @param defaultMinimum - Optional. Default is normally set to check if user owns >= 1. Here, you can specify a\r\n * new default minimum for all assets to fallback on if not defined in assetMinimumBalancesMap.\r\n * @returns If successful, verification was successful. Looked up asset data is also returned for convenience. \r\n * Throws error if invalid.\r\n */\r\nexport async function verifyOwnershipOfAssets(address: string, resources: string[], assetMinimumBalancesMap?: any, defaultMinimum?: number) {\r\n    let assetIds: string[] = [];\r\n    if (resources) {\r\n        const filteredAssetIds = resources.filter(elem => elem.startsWith('Asset ID: '));\r\n        for (const assetStr of filteredAssetIds) {\r\n            const assetId = assetStr.substring(10);\r\n            assetIds.push(assetId);\r\n        }\r\n    }\r\n\r\n    const assetLookupData = await chainDriver.verifyOwnershipOfAssets(address, assetIds, assetMinimumBalancesMap, defaultMinimum);\r\n\r\n    return assetLookupData;\r\n}\r\n","import React, { useState } from \"react\";\r\n\r\nimport { TestComponentProps } from \"./TestComponent.types\";\r\n\r\nimport \"./TestComponent.scss\";\r\n\r\nimport { constructChallengeStringFromChallengeObject } from \"../../verify\";\r\n// import { setChainDriver } from \"../../blockin\";\r\n// import { AlgoDriver } from \"../../ChainDrivers/AlgoDriver\";\r\n\r\nconst TestComponent: React.FC<TestComponentProps> = ({ heading, content }) => {\r\n    const [testing, setTesting] = useState('');\r\n\r\n    const handleCreateChallenge = async () => {\r\n        // setChainDriver(new AlgoDriver('Testnet'));\r\n        const c = await constructChallengeStringFromChallengeObject({ domain: 'https://blockin.edu', statement: 'asfad', address: 'A3KW6EZITJQTIHIVZUMN2BVG7DBKEBSGEJBIGEXQ4CPBQV6XAUQKZ5RRWA', uri: 'https://blockin.edu', nonce: '123', version: '1', chainId: 'ALL', issuedAt: new Date().toISOString() });\r\n        setTesting(c);\r\n    }\r\n\r\n    return <div data-testid=\"test-component\" className=\"test-component\">\r\n        <h1 data-testid=\"test-component__heading\" className=\"heading\">\r\n            {heading}\r\n            {testing}\r\n            <button onClick={async () => await handleCreateChallenge()}>Click 4 Challenge</button>\r\n        </h1>\r\n        <div data-testid=\"test-component__content\">{content}</div>\r\n    </div>\r\n}\r\n\r\n\r\n\r\nexport default TestComponent;\r\n","import { SupportedChain } from \"../@types/SignInWithBlockinButton\";\r\n\r\n/**\r\n * Gets metadata about the current chain. First, if currentChainInfo is passed, we just return that. \r\n * Next, we check the supported chains map and see if the name passed in matches. If nothing else was \r\n * found, we return a default object.\r\n * @param chainName Name of the current blockchain you would like to get. See SUPPORTED_CHAIN_MAP for\r\n * the natively supported names.\r\n * @param currentChainInfo Optional chain info. Must be of type SupportedChain. If this is defined, we\r\n * just return this\r\n * @returns SupportedChain object containing metadata about the chain.\r\n */\r\nexport const getChain = (chainName: string, currentChainInfo?: SupportedChain): SupportedChain => {\r\n    if (currentChainInfo) return currentChainInfo;\r\n    else if (SUPPORTED_CHAIN_MAP[chainName]) return SUPPORTED_CHAIN_MAP[chainName];\r\n    else return {\r\n        name: chainName,\r\n        logo: 'https://cdn-icons-png.flaticon.com/512/2091/2091665.png'\r\n    }\r\n}\r\n\r\nconst SUPPORTED_CHAIN_MAP: any = {\r\n    'Ethereum': {\r\n        name: 'Ethereum',\r\n        logo: 'https://cloudfront-us-east-1.images.arcpublishing.com/coindesk/ZJZZK5B2ZNF25LYQHMUTBTOMLU.png'\r\n    },\r\n    'Algorand Mainnet': {\r\n        name: 'Algorand',\r\n        logo: 'https://res.cloudinary.com/startup-grind/image/upload/c_fill,f_auto,g_center,q_auto:good/v1/gcs/platform-data-algorand/contentbuilder/C_Algorand-Event-Thumbnail-400x400_EjNd7dj.png'\r\n    },\r\n    'Algorand Testnet': {\r\n        name: 'Algorand (Testnet)',\r\n        logo: 'https://res.cloudinary.com/startup-grind/image/upload/c_fill,f_auto,g_center,q_auto:good/v1/gcs/platform-data-algorand/contentbuilder/C_Algorand-Event-Thumbnail-400x400_EjNd7dj.png'\r\n    },\r\n}","// Generated with util/create-component.js\nimport React from \"react\";\nimport { SignInWithBlockinButtonProps, PresetAsset, PresetUri, VerifyChallengeRequest } from \"./SignInWithBlockinButton.types\";\nimport \"./SignInWithBlockinButton.scss\";\nimport { createChallenge } from \"../../verify\";\nimport { useEffect, useState } from 'react';\n// import { CloseIcon } from './CloseIcon';\nimport { getChain } from '../SupportedChains'\n\nconst buttonStyle = {\n    backgroundColor: 'rgb(176, 215, 252)',\n    color: 'black',\n    padding: '12px 15px',\n    fontWeight: 600,\n    borderRadius: '10px',\n    cursor: 'pointer',\n}\n\n/**\n * Gets the default selected resources from the passed-in props\n * @param assets Assets passed in as props\n * @param uris URIs passed in as props\n * @returns Array of formatted string[] resources\n */\nconst getDefaultSelectedResources = (assets: PresetAsset[], uris: PresetUri[]) => {\n    const selectedResources = [];\n    for (const asset of assets) {\n        if (asset.defaultSelected) {\n            selectedResources.push(`Asset ID: ${asset.assetId}`)\n        }\n    }\n\n    for (const uri of uris) {\n        if (uri.defaultSelected) {\n            selectedResources.push(`${uri.uri}`)\n        }\n    }\n\n    return selectedResources;\n}\n\n/**\n * SignInWithBlockinButton - React Button that handles functionality of creating a Blockin challenge for a user.\n * As props, you can pass in everything needed to generate, sign, and verify the challenge. See the documentation\n * for each prop for more information.\n */\nconst SignInWithBlockinButton: React.FC<SignInWithBlockinButtonProps> = ({\n    challengeParams,\n    displayedAssets = [],\n    displayedUris = [],\n    signChallenge,\n    verifyChallenge,\n    generateNonce,\n    currentChain,\n    currentChainInfo,\n    canAddCustomAssets = false,\n    canAddCustomUris = false,\n    customAddResourcesMessage = '',\n}) => {\n    const [modalIsVisible, setModalIsVisible] = useState(false);\n\n    const [selectedResources, setSelectedResources] = useState<string[]>(getDefaultSelectedResources(displayedAssets, displayedUris));\n    const [displayMessage, setDisplayMessage] = useState('');\n    const [chain, setChain] = useState(getChain(currentChain, currentChainInfo));\n\n    const [assetId, setAssetId] = useState('');\n    const [uri, setUri] = useState('');\n\n    /**\n     * This will be true when 1) there are no selectable resources passed in by provider and 2) user can not add custom\n     * resources.\n     */\n    const resourcesAreHidden = displayedAssets.length === 0 && displayedUris.length === 0 && !canAddCustomAssets && !canAddCustomUris;\n\n    /**\n     * Adds a resource that was added by the user to selectedResources. Formats in correct Blockin format\n     * for assets vs. URIs.\n     * @param resource ID / text that the user inputted\n     * @param isAssetID If is an asset, we prefix with 'Asset ID: ' to match the Blockin interface \n     */\n    const addCustomResource = async (resource: string, isAssetID?: boolean) => {\n        if (!resource) return;\n        const resourceToAdd = isAssetID ? `Asset ID: ${resource}` : resource\n        const newArr = [...selectedResources, resourceToAdd]\n        setSelectedResources(newArr);\n    }\n\n    /**\n     * Upon chain change, update chain metadata and props\n     */\n    useEffect(() => {\n        setChain(getChain(currentChain, currentChainInfo));\n    }, [currentChain]);\n\n\n    return <>\n        <button style={buttonStyle} onClick={() => setModalIsVisible(!modalIsVisible)}>\n            Sign In with Blockin\n        </button>\n\n        {modalIsVisible && <>\n            <section style={{\n                textAlign: 'center',\n                padding: '100px 0px',\n                position: 'fixed',\n                background: 'rgba(0, 0, 0, 0.7)',\n                top: 0,\n                left: 0,\n                transition: 'opacity 500ms',\n                zIndex: 50,\n                minHeight: '100vh',\n                minWidth: '100vw',\n            }} >\n                <div style={{\n                    wordWrap: 'break-word',\n                    backgroundColor: 'white',\n                    opacity: '100%',\n                    width: 600,\n                    height: 600,\n                    maxWidth: '90vw',\n                    margin: '0 auto 0px',\n                    padding: '30px',\n                    borderRadius: '25px',\n                    overflowY: 'auto',\n                    scrollbarWidth: 'none'\n                }}>\n                    <button onClick={() => { setModalIsVisible(!modalIsVisible) }} style={{\n                        background: 'none',\n                        fill: 'black',\n                        padding: '3px 0px 0px 0px',\n                        margin: '0px 0px 20px 0px',\n                        border: 'none',\n                        float: 'right',\n                        display: 'flex',\n                        justifyContent: 'flex-end',\n                        width: '100%',\n                        cursor: 'pointer'\n                    }}>Close</button>\n                    <h1>Sign In with Blockin!</h1>\n                    <img src={chain.logo} height='100px' width='auto' />\n\n                    <h3><>{challengeParams.domain} wants you to sign in with your {chain.name} account: {challengeParams.address}</></h3>\n                    <h3>{challengeParams.statement}</h3>\n                    <h3>URI: {challengeParams.uri}</h3>\n                    <h3>You will be authorized starting {challengeParams.notBefore ? challengeParams.notBefore : `now (${new Date().toISOString()})`} {challengeParams.expirationDate && `until ${challengeParams.expirationDate}`}</h3>\n                    {!resourcesAreHidden && <>\n                        {(displayedAssets.length !== 0 || displayedUris.length !== 0) && <>\n                            {<h3>Select from the resources you would like to receive access to:</h3>}\n                            {displayedAssets.map(elem => {\n                                return <>\n                                    <hr />\n                                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                                        <div style={{ display: 'flex' }}>\n                                            <div style={{ textAlign: 'left', alignItems: 'center', height: '100%', marginRight: 10 }}>\n                                                <img src={chain.logo} height='50px' width='auto' />\n                                            </div>\n                                            <div style={{ textAlign: 'left' }}>\n                                                <b>{elem.name}</b>\n                                                <br />\n                                                Asset ID:{' '}\n                                                <a\n                                                    style={{\n                                                        color: 'rgb(0, 99, 220)'\n                                                    }}\n                                                    href={`https://testnet.algoexplorer.io/asset/${elem.assetId}`}\n                                                    target=\"_blank\"\n                                                    rel=\"noreferrer\">\n                                                    {elem.assetId}\n                                                </a> - {elem.description}\n                                            </div>\n                                        </div>\n\n                                        <div style={{ textAlign: 'right' }}>\n                                            {selectedResources.includes(`Asset ID: ${elem.assetId}`) ?\n                                                <button style={buttonStyle} onClick={() => {\n                                                    const newArr = selectedResources.filter(resource => resource !== `Asset ID: ${elem.assetId}`)\n                                                    setSelectedResources(newArr);\n                                                }}\n                                                    disabled={elem.frozen}>\n                                                    Deselect\n                                                </button> :\n                                                <button style={buttonStyle} disabled={elem.frozen} onClick={() => {\n                                                    const newArr = [...selectedResources, `Asset ID: ${elem.assetId}`]\n                                                    setSelectedResources(newArr);\n                                                }}>\n                                                    Select\n                                                </button>\n                                            }\n                                        </div>\n                                    </div>\n                                </>\n                            })}\n\n\n                            {displayedUris.map(elem => {\n                                return <>\n                                    <hr />\n                                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n\n                                        <div style={{ display: 'flex' }}>\n                                            <div style={{ textAlign: 'left', alignItems: 'center', height: '100%', marginRight: 10 }}>\n                                                <img src='https://cdn1.iconfinder.com/data/icons/color-bold-style/21/43-512.png' height='auto' width='50px' />\n                                            </div>\n                                            <div style={{ textAlign: 'left' }}>\n                                                <b>{elem.name}</b>\n                                                <br />\n                                                URI: {' '}\n                                                <a\n                                                    style={{\n                                                        color: 'rgb(0, 99, 220)'\n                                                    }}\n                                                    href={`${elem.uri}`}\n                                                    target=\"_blank\"\n                                                    rel=\"noreferrer\">\n                                                    {elem.uri}\n                                                </a> - {elem.description}\n                                            </div>\n                                        </div>\n                                        <div style={{ textAlign: 'right' }}>\n                                            {selectedResources.includes(elem.uri) ?\n                                                <button disabled={elem.frozen} style={buttonStyle} onClick={() => {\n                                                    const newArr = selectedResources.filter(resource => resource !== elem.uri)\n                                                    setSelectedResources(newArr);\n                                                }}>\n                                                    Deselect\n                                                </button> :\n                                                <button disabled={elem.frozen} style={buttonStyle} onClick={() => {\n                                                    const newArr = [...selectedResources, elem.uri]\n                                                    setSelectedResources(newArr);\n                                                }}>\n                                                    Select\n                                                </button>\n                                            }\n                                        </div>\n                                    </div>\n                                </>\n                            })}\n                        </>}\n                    </>}\n                    {(canAddCustomAssets || canAddCustomUris) &&\n                        <>\n                            {<h3>You may also add custom resources below: </h3>}\n                            {<h3>{customAddResourcesMessage}</h3>}\n\n                            {canAddCustomAssets && <>\n                                <div style={{\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    justifyContent: 'space-between'\n                                }}>\n                                    <input value={assetId} type=\"text\" placeholder='Add Asset ID #' onChange={e => setAssetId(e.target.value)} />\n                                    <button\n                                        onClick={async () => {\n                                            await addCustomResource(assetId);\n                                            setAssetId('');\n                                        }}\n                                    >\n                                        Add Asset ID\n                                    </button>\n                                </div>\n                            </>}\n\n                            {canAddCustomUris && <>\n                                <div style={{\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    justifyContent: 'space-between'\n                                }}>\n                                    <input value={uri} type=\"text\" placeholder='Add URI' onChange={e => setUri(e.target.value)} />\n                                    <button\n                                        onClick={async () => {\n                                            await addCustomResource(uri);\n                                            setUri('');\n                                        }}\n                                    >\n                                        Add URI\n                                    </button>\n                                </div>\n                            </>}\n                        </>\n                    }\n\n                    {selectedResources && <h3>List of Selected Resources</h3>}\n                    {selectedResources.map(resource => {\n                        return <li>{resource}<button onClick={() => {\n                            const newArr = selectedResources.filter(elem => resource !== elem)\n                            setSelectedResources(newArr);\n                        }}>Remove</button></li>\n                    })}\n\n\n\n                    <hr />\n                    <button style={buttonStyle} onClick={async () => {\n                        const nonce = generateNonce ? await generateNonce() : challengeParams.nonce;\n\n                        const challenge = {\n                            ...challengeParams,\n                            resources: selectedResources,\n                            nonce\n                        };\n\n                        const challengeString = await createChallenge(challenge);\n\n                        const signChallengeResponse: VerifyChallengeRequest = await signChallenge(challengeString);\n                        const { success, message } = await verifyChallenge(signChallengeResponse);\n\n                        if (!success) {\n                            setDisplayMessage(message);\n                        } else {\n                            setDisplayMessage('');\n                            setSelectedResources([]);\n                            setModalIsVisible(false);\n                        }\n                    }}>\n                        Sign In\n                    </button>\n                    {displayMessage && <p>{displayMessage}</p>}\n\n                </div>\n            </section>\n        </>\n        }\n    </>;\n}\n\nexport default SignInWithBlockinButton","// Generated with util/create-component.js\nimport React from \"react\";\n\nimport { ChainSelectProps } from \"./ChainSelect.types\";\nimport { useEffect, useState } from \"react\";\nimport \"./ChainSelect.scss\";\nimport { ChainProps } from \"../SignInWithBlockinButton/SignInWithBlockinButton.types\";\n\n/**\n * ChainSelect - Component to handle updating the chain for multi-chain dApps. This is to be used in conjunction\n * with the SignInWithBlockin button.\n */\nconst ChainSelect: React.FC<ChainSelectProps> = ({ chains, updateChain }) => {\n    const [chain, setChain] = useState<string>();\n    const [menuIsVisible, setMenuIsVisible] = useState<boolean>(false);\n\n    useEffect(() => {\n        if (chains[0]) {\n            handleChainChange(chains[0]);\n        }\n    }, []);\n\n    const handleChainChange = (chain: ChainProps) => {\n        setChain(chain.name);\n        updateChain(chain);\n    }\n\n    return <>\n        <b>Current Chain: {chain}</b> <button onClick={() => setMenuIsVisible(!menuIsVisible)}>{menuIsVisible ? 'Hide' : 'Show'}</button>\n        <div>\n            {menuIsVisible && <>\n                {\n                    chains.map(chain => {\n                        return <div key={chain.name}><button onClick={() => handleChainChange(chain)}  >Switch to Chain: {chain.name}</button></div>\n                    })\n                }\n            </>}\n        </div>\n    </>\n};\n\nexport default ChainSelect;\n\n"],"names":[],"mappings":"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"}